<!DOCTYPE HTML>
<!--
	Hielo by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Earthquake Monitoring &amps; Detection</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
        
        <meta charset="utf-8">
      <script src="https://d3js.org/d3.v4.min.js"></script>
      <script src="https://d3js.org/topojson.v2.min.js"></script>
		<link rel="stylesheet" href="assets/css/main.css" />
        
        <script>
        
            .header-video {
              position: relative;
              overflow: hidden;
            }

            .header-video iframe,
            .header-video video {
              position: absolute;
              top: 0;
              bottom: 0;
              left: 0;
              right: 0;
            }

            .header-video iframe {
              height: 100%;
              width: 100%;
            }

            .header-video video {
              width: 100%;
            }

            .header-video__teaser-video {
              width: 100%;
              height: auto; 
            }

            .header-video__media {
              width: 100%;
              height: auto;
            }
            * {
              margin: 0;
              padding: 0;
              -webkit-box-sizing: border-box;
              -moz-box-sizing: border-box;
              box-sizing: border-box;
            }

            body {
              font-family: 'Source Sans Pro', sans-serif;
              font-weight: 400;
              font-size: 100%;
            }

            p {
              font-size: 1.2em;
              margin-bottom: 1em;
            }

            h1, h2, h3 {
              font-weight: 700;
              margin-bottom: .35em;
            }

            h1 {
              font-size: 3em;
              line-height: 1;
            }

            h2 {
              font-size: 2em;
              margin-top: 1em;
            }

            .header-video__play-trigger {
              z-index: 5;
              position: absolute;
              background: rgba(0,0,0,.3);
              text-align: center;
              color: white;
              text-decoration: none;
              padding: 1.5em 3em;
              z-index: 5;
              left: 50%;
              top: 50%;
              border-radius: 10px;
              -webkit-transform: translate(-50%, -50%);
              -moz-transform: translate(-50%, -50%);
              transform: translate(-50%, -50%);
              -webkit-transition: background .5s;
              -moz-transition: background .5s;
              transition: background .5s;
            }

            .header-video__play-trigger:hover {
              background: rgba(0,0,0,.5);
            }
            .header-video__close-trigger {
              z-index: 99;
              position: absolute;
              background: #A61212;
              text-align: center;
              color: white;
              text-decoration: none;
              padding: 2em 3em;
              border-radius: 10px;
              right: 30px;
              top: 30px;
              -webkit-transition: background .3s;
              -moz-transition: background .3s;
              transition: background .3s;  
              border: none;
            }
            .header-video__close-trigger:hover {
              background: #363636;
              cursor: pointer;
            }

            .container {
              margin: 0 auto;
              max-width: 1200px;
              padding: 10em 2em 10em 2em;
            }
        </script>
        
        
                <style>
                    

                    .land {
                      fill: black;
                      fill-opacity: 0.1;
                      stroke: black;
                      stroke-width: 0.5;
                    }

                    .earthquake {
                      fill-opacity: 0.5;
                      stroke: black;
                      stroke-width: 0.5;
                    }

                    text {
                      font-family: sans-serif;
                    }

                    .pulse {
                      fill: none;
                      stroke: black;
                      stroke-width: 0.5;
                    }
                    
                    .center {
                        margin: auto;
                        width: 50%;
                        padding: 10px;
                    }
          </style>
        
       <script>
        
                svg {
                    display: block;
                    margin: 0 auto;
                }
        
        </script>
        
        
        <script>
          $(document).ready(function() {
            $('.header-video').each(function(i, elem) {
                headerVideo = new HeaderVideo({
                  element: elem,
                  media: '.header-video__media',
                  playTrigger: '.header-video__play-trigger',
                  closeTrigger: '.header-video__close-trigger'
                });
            });
          });
        </script>
        
        
        
	</head>
	<body class="subpage">

		<!-- Header -->
			<header id="header">
				<div class="logo"><a href="index.php">Earthquake <span>Monitoring &amp; Detection</span></a></div>
				<a href="#menu">Menu</a>
			</header>

		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a href="index.php">Home</a></li>
					<li><a href="generic.html">Generic</a></li>
					<!--<li><a href="elements.html">Elements</a></li>-->
				</ul>
			</nav>

		<!-- One -->
			<!--<section id="One" class="wrapper style3">
				<div class="inner">
					<header class="align-center">
						<p>Eleifend vitae urna</p>
						<h2>Generic Page Template</h2>
					</header>
				</div>
			</section>-->

        <div class="header-video" style="width: 1349px; height: 318px;">
         <video autoplay="true" loop="true" muted="" id="header-video__teaser-video" class="header-video__teaser-video"><source src="video/teaser-video.webm" type="video/mp4"><source src="http://zerosixthree.se/labs/video-header/video/teaser-video.mp4" type="video/mp4"></video></div>
    
		<!-- Two -->
			<section id="two" class="wrapper style2">
				<div class="inner">
					<div class="box">
						<div class="content">
							<header class="align-center">
								<p>Fault Rupture &amp; Seismic Energy Release</p>
								<h2>Why Earthquakes occur?</h2>
							</header>
                            
                             
                
                 
                            
                            
							<p>Most earthquakes are caused by the sudden release of built-up stress along faults, fractures in the Earth’s crust where large blocks of crustal rock move against one another. An earthquake’s size can be measured by the amount of energy released by that movement. While scientists can't predict earthquakes, they are developing earthquake early warning systems that can provide seconds to minutes of warning when an earthquake occurs.  Scientists can also estimate the likelihood of future quakes and use that information to design safer buildings and roads.</p>

							<p>Earthquakes are a global hazard, taking millions of lives worldwide since 1900. In the United States, large earthquakes pose a substantial threat along the West Coast and in Alaska. A single event can be devastating: for example, the 1994 Northridge, CA, magnitude 6.7 earthquake caused at least $40 billion in direct damage and killed around sixty people.[1] While the West Coast has the most active faults, large earthquakes can also affect the Central and Eastern United States, as they did during the 1811 and 1812 New Madrid earthquakes and 1886 Charleston, SC earthquake. Since 2009, a significant number of (mostly small) earthquakes have been observed in some areas of Oklahoma, Kansas, and other major oil- and gas-producing states; these earthquakes are mostly caused by the disposal of large volumes of wastewater in underground injection wells. </p>

							<p>Geoscientists measure earthquakes to pinpoint where they are occurring and determine the long-term earthquake hazard an area may face. This understanding of potential earthquake hazard is crucial for urban planning and earthquake-resistant design of buildings and infrastructure. Geoscientists are also developing earthquake early warning systems to give a few seconds to minutes of early warning once an earthquake has been detected.</p>
						</div>
					</div>
				</div>
			</section>
        
       <section id="two" class="wrapper style2" align="center">
           
           <div align="center">
               <header class="align-center">
                   <h2>Real-Time Earthquake Feed: USGS Database</h2>
               </header>
                        <script type = "text/javascript">
                                var margin = {top: 50, right: 50, bottom: 50, left: 50};

                            var width = 960 - margin.left - margin.right,
                                    height = 500 - margin.top - margin.bottom;

                            var svg = d3.select("body").append("svg")
                                  .attr("width", width + margin.left + margin.right)
                                  .attr("height", height + margin.top + margin.bottom)
                                .append("g")
                                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                            
                            var counterValue = 0;

                            var counter = svg.append("text")
                                .attr("class", "counter")
                                .text(0);

                            var quakes;

                            var dragbehaviour = d3.drag()
                                .on("start", dragstarted)
                                .on("drag", dragged)
                                .on("end", dragended);	

                            var mapUrl = "https://unpkg.com/world-atlas@1/world/110m.json"
                            var earthquakeUrl = "https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_week.geojson";

                            var pulseSize = 8;

                            var colour = d3.scaleLinear()
                                .range(["blue", "red"]);

                            var radius = d3.scaleSqrt()
                            .range([0, 7]);

                            var dateObj = new Date();
                                    dateObj.setDate(dateObj.getDate() - 7);

                            var x = d3.scaleTime()
                                .domain([dateObj, new Date()])
                                .range([0, width]);

                            // fix this scale so that we convert the time to how many seconds ago the earthquake was
                            var xDelay = d3.scaleLinear()
                                .range([0, width]);

                            var projection;

                            function projectCoord(d, index) {
                                return projection([d.geometry.coordinates[0], d.geometry.coordinates[1]])[index];
                                }

                            d3.queue()
                                .defer(d3.json, mapUrl)
                                .defer(d3.json, earthquakeUrl)
                                .await(load);

                            function load(error, world, earthquakes) {
                              if (error) throw error;

                              projection = d3.geoEquirectangular()
                                .fitSize([width, height], topojson.feature(world, world.objects.land));

                              radius.domain([0, d3.max(earthquakes.features, function(d) {
                                return d.properties.mag;
                              })]);

                              colour.domain(radius.domain());

                              var path = d3.geoPath()
                                .projection(projection);

                              var countries = svg.selectAll("path")
                                .data(topojson.feature(world, world.objects.countries).features)
                              .enter().append("path")
                                .attr("class", "land")
                                .attr("d", path);

                              setQuakeDelay(earthquakes.features);

                              quakes = earthquakes.features;

                              var xAxis = svg.append("g")
                                .attr("class", "x-axis")
                                .attr("transform", "translate(0," + (height + margin.bottom / 4) + ")")
                                .call(d3.axisBottom(x));

                              var longestDelay = earthquakes.features[0].delay;
                              xDelay.domain([0, longestDelay]);

                              var currentTime = svg.append("circle")
                                .attr("r", 5)
                                .attr("cx", 0)
                                .attr("cy", height)
                                .call(dragbehaviour);

                            }

                            function dragstarted(d) {
                              d3.select(this)
                                .style("fill", "red");

                              var eqCount = d3.selectAll("g.eq").size();;
                              counterValue = eqCount;
                              counter.text(counterValue);
                            }

                            function dragged(d) {
                              var minX = 0,
                                  maxX = width;

                              var position = Math.max(minX, Math.min(maxX, d3.event.x));

                              d3.select(this)
                                .attr("cx", position);

                              var current = quakes.filter(function(a) {
                                return a.delay < xDelay.invert(position);
                              });

                              displayQuakes(current, position);
                            }

                            function dragended(d) {
                               d3.select(this)
                                .style("fill", "black");

                              counterValue = d3.selectAll("g.eq").size();
                              counter.text(counterValue)
                            }

                            var dataGroup = svg.append("g");

                            function displayQuakes(current, position) {

                                var selection = dataGroup.selectAll("g.eq")
                                .data(current, function(d) {
                                  return d.id;
                                });

                              var eqSel = selection.enter()
                                .append("g")
                                .attr("class", "eq");

                              var eqC = eqSel.append("circle")
                                .attr("class", "earthquake")
                                .attr("cx", function(d) {          
                                  return projectCoord(d, 0);
                                })
                                .attr("cy", function(d) {
                                  return projectCoord(d, 1);
                                })
                                .attr("r", 0)
                                .style("fill", function(d) {
                                  return colour(d.properties.mag);
                                })

                              // append pulse
                              var eqP = eqSel.append("circle")
                                .attr("class", "pulse")
                                .attr("cx", function(d) {          
                                  return projectCoord(d, 0);
                                })
                                .attr("cy", function(d) {
                                  return projectCoord(d, 1);
                                })
                                .attr("r", 0);

                              eqC.transition()
                                .duration(1000)
                                .delay(function(d) {
                                    return xDelay.invert(position) - d.delay;
                                })
                                .attr("r", function(d) {
                                  if(d.properties.mag < 0) {
                                    return 0.1;
                                  } else {
                                    return radius(d.properties.mag);				 
                                  }     
                                });

                              eqP.transition()
                                .duration(2000)
                                .delay(function(d) {
                                    return xDelay.invert(position) - d.delay;
                                })
                                .attr("r", function(d) {
                                  if(d.properties.mag < 0) {
                                    return 0.1 * pulseSize;
                                  } else {
                                    return radius(d.properties.mag) * pulseSize;				 
                                  }     
                                })
                                .style('opacity', 0)
                                    .remove();

                              selection.exit()
                                .remove();

                            }

                            var setQuakeDelay = function(quakes) {
                              for(var i = 0, max = quakes.length; i < max; i++){
                                var timeDiff = quakes[i].properties.time - dateObj;
                                var timeDiffObj = new Date(timeDiff);
                                quakes[i].delay = Date.parse(timeDiffObj) / 35000;
                              }
                            };

                  </script>
           </div>
        </section>
        
        
        
            <!--<div class="header-video" style="width: 1349px; height: 318px;">
                
                  <video autoplay="true" loop="true" muted="" id="header-video__teaser-video" class="header-video__teaser-video"><source src="video/teaser-video.webm" type="video/mp4"><source src="http://zerosixthree.se/labs/video-header/video/teaser-video.mp4" type="video/mp4"></video></div>-->
      
        
        
        
        
        
        

		<!-- Footer -->
			<footer id="footer">
				<div class="container">
					<ul class="icons">
						<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
						<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
						<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
						<li><a href="#" class="icon fa-envelope-o"><span class="label">Email</span></a></li>
					</ul>
				</div>
				<div class="copyright">
					&copy; Lennox E. Thompson. All rights reserved.
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
        
        <!-- New Scripts header video -->
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
        <script src="http://zerosixthree.se/labs/video-header/js/script.js?v1.2"></script>

	</body>
</html>